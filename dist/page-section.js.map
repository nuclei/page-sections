{"version":3,"sources":["make-template.js","page-section.js"],"names":["makeTemplate","strings","html","substs","i","length","template","document","createElement","innerHTML","PageSectionItem","_active","shadowRoot","attachShadow","mode","ShadyCSS","applyStyle","appendChild","importNode","content","setActive","state","setAttribute","removeAttribute","_setActiveState","_inView","active","dispatchEvent","Event","box","getBoundingClientRect","top","window","innerHeight","bottom","prepareTemplate","customElements","define"],"mappings":"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","file":"page-section.js","sourcesContent":["const makeTemplate = function (strings, ...substs) {\n  var html = ''\n  for (let i = 0; i < substs.length; i++) {\n    html += strings[i]\n    html += substs[i]\n  }\n  html += strings[strings.length - 1]\n  var template = document.createElement('template')\n  template.innerHTML = html\n  return template\n}\n/**\n * export make template function\n */\nexport default makeTemplate\n","/* global HTMLElement Event */\nimport makeTemplate from './make-template';\n\n(function () {\n  class PageSectionItem extends HTMLElement {\n    constructor () {\n            // If you define a ctor, always call super() first!\n            // This is specific to CE and required by the spec.\n      super()\n            // by default _active is false\n      this._active = false\n            // Attach a shadow root to the element.\n      const shadowRoot = this.attachShadow({mode: 'open'})\n            // add content to shadowRoot & apply css polyfill\n      ShadyCSS.applyStyle(this) // eslint-disable-line no-undef\n      shadowRoot.appendChild(document.importNode(template.content, true))\n    }\n        /**\n         * get active state of individual section\n         * @method active\n         * @return {Boolean}\n         */\n    get active () {\n      return this._active\n    }\n        /**\n         * check if element is in view\n         */\n    get _inView () {\n            // get elements bounding box\n      var box = this.getBoundingClientRect()\n            // check if element is in view\n      if ((box.top >= 0 && (\n                    box.top < window.innerHeight * 0.5 ||\n                    box.bottom <= window.innerHeight)) ||\n                (box.top < window.innerHeight * 0.5 && box.bottom > window.innerHeight * 0.5)\n            ) {\n        return true\n      }\n    }\n        /**\n         * When element is added to DOM\n         */\n    connectedCallback () {\n            // initialize activated state\n      this.setActive()\n    }\n        /**\n         * set _active property & add/remove active attr\n         */\n    _setActiveState (state) {\n      if (this._active === state) {\n        return\n      }\n            // set _active property\n      this._active = (state === true)\n            // add or remove active attribute\n      if (this._active) {\n        this.setAttribute('active', '')\n        return\n      } else {\n        this.removeAttribute('active')\n      }\n    }\n        /**\n         * set active if in viewport or unactive if not\n         */\n    setActive () {\n      this._setActiveState(this._inView)\n\n      if (this._inView) {\n        if (this.active === false) {\n                    // set attributes\n          this.setAttribute('active', '')\n          this._active = true\n                    // Dispatch the event.\n          this.dispatchEvent(new Event('activated'))\n        }\n                // return true\n        return true\n      }\n            // set element to unactive\n      if (this.active === true) {\n                // set attributes\n        this.removeAttribute('active')\n        this._active = false\n                // Dispatch the event.\n        this.dispatchEvent(new Event('deactivated'))\n      }\n    }\n    }\n\n  const template = makeTemplate`<style>\n            :host{\n                display: inline-block;\n                flex: 0 1 auto;\n            }\n            :host(:not([flexible])){\n                box-sizing: border-box;\n                width: 100%;\n                min-height: 100vh;\n            }\n            :host([flexible]){\n                margin-left: 50%;\n                transform: translateX(-50%);\n            }\n        </style>\n        <div class=\"o-page-section\">\n            <slot></slot>\n        </div>`\n\n  ShadyCSS.prepareTemplate(template, 'page-section') // eslint-disable-line no-undef\n  window.customElements.define('page-section', PageSectionItem)\n})()\n"]}