{"version":3,"sources":["page-sections.js"],"names":["PageSections","shadowRoot","attachShadow","mode","innerHTML","setActive","_setActive","bind","scroll_fn","_scrollEvent","setTimeout","window","addEventListener","e","clearTimeout","fn","getBoundingClientRect","bottom","isActive","removeAttribute","setAttribute","elements","querySelectorAll","i","length","_isActive","element","_inView","box","HTMLElement","customElements","define"],"mappings":";;;;;;;;;;IAAMA,Y;;;AAEF,4BAAc;AAAA;;AAIV;AAJU;AACV;AACA;;;AAGA,YAAMC,aAAa,MAAKC,YAAL,CAAkB,EAACC,MAAM,MAAP,EAAlB,CAAnB;AACAF,mBAAWG,SAAX;AANU;AAkBb;;;;4CAEmB;AAChB,iBAAKC,SAAL,GAAiB,KAAKC,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAjB;AACA,iBAAKC,SAAL;AACA,iBAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBF,IAAlB,CAAuB,IAAvB,CAApB;;AAEAG,uBAAY,YAAU;AAClB,qBAAKJ,UAAL;AACH,aAFW,CAEVC,IAFU,CAEL,IAFK,CAAZ,EAEc,CAFd;AAGA;AACAI,mBAAOC,gBAAP,CAAwB,QAAxB,EAAkC,KAAKH,YAAvC,EATgB,CASsC;AACzD;;;qCAEYI,C,EAAG;AACZC,yBAAc,KAAKL,YAAL,CAAkBM,EAAhC;AACA,iBAAKN,YAAL,CAAkBM,EAAlB,GAAuBL,WAAY,YAAU;AACzC,qBAAKJ,UAAL;AACH,aAFkC,CAEjCC,IAFiC,CAE5B,IAF4B,CAAZ,EAET,EAFS,CAAvB;AAGH;AACD;;;;qCACa;AACT;AACA,gBAAI,KAAKS,qBAAL,GAA6BC,MAA7B,IAAuC,CAA3C,EAA6C;AACzC;AACA,qBAAKC,QAAL,GAAgB,KAAhB;AACA,qBAAKC,eAAL,CAAqB,QAArB;AACA;AACH;AACD;AACA,iBAAKD,QAAL,GAAgB,IAAhB;AACA,iBAAKE,YAAL,CAAkB,QAAlB,EAA2B,EAA3B;AACA;AACA,gBAAIC,WAAW,KAAKC,gBAAL,CAAsB,cAAtB,CAAf;AACA;AACA,iBAAI,IAAIC,IAAI,CAAZ,EAAeF,SAASG,MAAT,GAAkBD,CAAjC,EAAoC,EAAEA,CAAtC,EAAwC;AACpCF,yBAASE,CAAT,EAAYJ,eAAZ,CAA4B,QAA5B;AACA,qBAAKM,SAAL,CAAeJ,SAASE,CAAT,CAAf;AACH;AACJ;;;kCACSG,O,EAAQ;AACd,gBAAG,KAAKC,OAAL,CAAaD,QAAQV,qBAAR,EAAb,CAAH,EAAiD;AAC7CU,wBAAQrB,SAAR;AACH;AACJ;;;gCACOuB,G,EAAI,CAEX;;;;EAnEsBC,W;;AAqE3BlB,OAAOmB,cAAP,CAAsBC,MAAtB,CAA6B,eAA7B,EAA8C/B,YAA9C","file":"page-sections.js","sourcesContent":["class PageSections extends HTMLElement {\n\n    constructor() {\n        // If you define a ctor, always call super() first!\n        // This is specific to CE and required by the spec.\n        super();\n        // create shadowRoot\n        const shadowRoot = this.attachShadow({mode: 'open'});\n        shadowRoot.innerHTML = `\n            <style>\n              :host{\n                  display: flex;\n                  flex-direction: column;\n                  flex-wrap: nowrap;\n              }\n            </style>\n            <div class=\"o-page-sections\">\n                <slot></slot>\n            </div>\n        `;\n    }\n\n    connectedCallback() {\n        this.setActive = this._setActive.bind(this);\n        this.scroll_fn;\n        this._scrollEvent = this._scrollEvent.bind(this);\n\n        setTimeout( function(){\n            this._setActive();\n        }.bind(this), 1)\n        // wrap sections\n        window.addEventListener('scroll', this._scrollEvent); // bing this, so that it refers to custom element instead of window\n    }\n\n    _scrollEvent(e) {\n        clearTimeout( this._scrollEvent.fn );\n        this._scrollEvent.fn = setTimeout( function(){\n            this._setActive();\n        }.bind(this), 10);\n    }\n    // check if a child element is in view and set it to active\n    _setActive() {\n        // abort if section wrapper is not in view\n        if (this.getBoundingClientRect().bottom <= 0){\n            // set section wrapper to active\n            this.isActive = false;\n            this.removeAttribute('active');\n            return;\n        }\n        // set section wrapper to active\n        this.isActive = true;\n        this.setAttribute('active','');\n        // get all child-sections\n        var elements = this.querySelectorAll('page-section');\n        // loop through all items\n        for(var i = 0; elements.length > i; ++i){\n            elements[i].removeAttribute('active');\n            this._isActive(elements[i]);\n        }\n    }\n    _isActive(element){\n        if(this._inView(element.getBoundingClientRect())){\n            element.setActive();\n        }\n    }\n    _inView(box){\n\n    }\n}\nwindow.customElements.define('page-sections', PageSections);\n"]}