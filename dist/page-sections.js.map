{"version":3,"file":"page-sections.js","sources":["../node_modules/make-template/dist/makeTemplate.js","../src/page-section-container.ts","../src/page-section.ts","../src/page-sections.ts"],"sourcesContent":["const makeTemplate = function (strings) {\n    let html = strings[strings.length - 1];\n    let template = document.createElement('template');\n    template.innerHTML = html;\n    return template;\n};\n\nexport { makeTemplate };\n//# sourceMappingURL=makeTemplate.js.map\n","/* global HTMLElement CustomEvent */\n'use strict'\n\nimport { makeTemplate } from '../node_modules/make-template/dist/makeTemplate.js'\ndeclare const ShadyCSS // eslint-disable-line no-unused-vars\n\nlet template = makeTemplate`<style>\n    :host{\n        display: inline-block;\n        flex: 0 1 auto;\n        box-sizing: border-box;\n        width: 100%;\n        height: auto;\n        min-height: 100vh;\n        align-self: center;\n    }\n  </style>\n  <slot></slot>\n`\n\nexport class PageSectionContainer extends HTMLElement { // eslint-disable-line no-unused-vars\n  constructor () {\n    // If you define a constructor, always call super() first!\n    // This is specific to CE and required by the spec.\n    super()\n    // create shadowRoot\n    let shadowRoot = this.attachShadow({mode: 'open'})\n    // check if polyfill is used\n    if (typeof ShadyCSS !== 'undefined') {\n      ShadyCSS.prepareTemplate(template, 'page-section-container') // eslint-disable-line no-undef\n      // apply css polyfill\n      ShadyCSS.styleElement(this) // eslint-disable-line no-undef\n    }\n    // add content to shadowRoot\n    shadowRoot.appendChild(document.importNode(template.content, true))\n  }\n\n  /**\n  * @method connectedCallback\n  * @description When element is added to DOM\n   */\n  connectedCallback () {\n    let element = this\n    var fn\n    // setup scroll event to check for active elements\n    window.addEventListener('scroll', function () {\n      clearTimeout(fn)\n      fn = setTimeout(function () {\n        element.setActiveState()\n      }, 10)\n    })\n    // initialize activated state\n    setTimeout(function () {\n      element.setActiveState()\n    }, 1)\n  }\n  /**\n   * @method _inView\n   * @description check if element is in view\n   */\n  get _inView () {\n    return this.getBoundingClientRect().bottom > 0 && this.getBoundingClientRect().top < window.innerHeight\n  }\n  /**\n   * @method setActiveState\n   * @description set _active property & add/remove active attr\n   */\n  public setActiveState () {\n    if (this._inView) {\n      this._setActive()\n      // Get all child elements and activate visible ones\n      // stop once an inactive item follows an active item\n      Array.prototype.slice.call(this.querySelectorAll('page-section')).map(function (item, index, array) {\n        item.parent = item\n        item.setActiveState()\n        // abort if current element is NOT in view, but previous was in view\n        // if (index > 0 && !item.hasAttribute('active') && array[index - 1].hasAttribute('active')) {\n        //   return\n        // }\n      })\n    } else {\n      this._setUnactive()\n    }\n  }\n  /**\n   * _setActive\n   */\n  private _setActive () {\n    if (this.hasAttribute('active')) return\n    // set attribute\n    this.setAttribute('active', '')\n    // Dispatch the event.\n    this.dispatchEvent(new CustomEvent('activated', { 'detail': {\n      'wasActivated': this.getAttribute('wasActivated') !== null\n    }}))\n  }\n  /**\n   * _setUnactive\n   */\n  private _setUnactive () {\n    // set 'wasActivated' attribute, if element was active\n    if (this.hasAttribute('active') && !this.hasAttribute('wasActivated')) {\n      this.setAttribute('wasActivated', '')\n    }\n    // remove 'active' attribute\n    this.removeAttribute('active')\n    // Dispatch the event.\n    this.dispatchEvent(new CustomEvent('deactivated'))\n  }\n}\n","/* global HTMLElement CustomEvent fetch*/\n'use strict'\n\nimport { makeTemplate } from '../node_modules/make-template/dist/makeTemplate.js'\ndeclare const ShadyCSS // eslint-disable-line no-unused-vars\n\nlet template = makeTemplate`<style>\n    :host{\n        display: inline-block;\n        flex: 0 1 auto;\n        box-sizing: border-box;\n        width: 100%;\n        height: auto;\n        min-height: 100vh;\n        align-self: center;\n    }\n  </style>\n  <slot></slot>\n`\n\nexport class PageSection extends HTMLElement { // eslint-disable-line no-unused-vars\n  private _src: string = '' // eslint-disable-line no-undef\n  constructor () {\n    // If you define a constructor, always call super() first!\n    // This is specific to CE and required by the spec.\n    super()\n    // create shadowRoot\n    let shadowRoot = this.attachShadow({mode: 'open'})\n    // check if polyfill is used\n    if (typeof ShadyCSS !== 'undefined') {\n      ShadyCSS.prepareTemplate(template, 'page-section') // eslint-disable-line no-undef\n      // apply css polyfill\n      ShadyCSS.styleElement(this) // eslint-disable-line no-undef\n    }\n    // add content to shadowRoot\n    shadowRoot.appendChild(document.importNode(template.content, true))\n  }\n  /**\n  * @method observedAttributes\n  * @description return attributes that should be watched for updates\n   */\n  static get observedAttributes () {\n    return ['src']\n  }\n  /**\n  * @method observedAttributes\n  * @description return attributes that should be watched for updates\n   */\n  attributeChangedCallback (attrName: string, oldVal, newVal) {\n    this[attrName] = newVal\n  }\n  /**\n   * @method _inView\n   * @description check if element is in view\n   */\n  get _inView () {\n    // minimum visible percent of the element to be considered active\n    var minVisible = Math.min(1, (parseFloat(this.getAttribute('requiredVisible')) || parseFloat((this as any).parent.getAttribute('requiredVisible')) || 0.6)) // eslint-disable-line no-undef\n    // px value of element that can be hidden\n    var requiredVisiblePx = minVisible * Math.min(this.getBoundingClientRect().height, window.innerHeight)\n    // calculate visible height\n    var visibleHeight = this.getBoundingClientRect().height\n    // substract part that is outside screen to top\n    visibleHeight += Math.min(0, this.getBoundingClientRect().top)\n    // substract part that is outside screen to bottom\n    visibleHeight -= Math.max(0, (this.getBoundingClientRect().bottom - window.innerHeight))\n    // return if element is visible or not\n    return visibleHeight >= requiredVisiblePx\n  }\n  /**\n   * @method setActiveState\n   * @description set active if in viewport or unactive if not\n   */\n  public setActiveState () {\n    if (this._inView) {\n      this._setActive()\n    } else {\n      this._setUnactive()\n    }\n  }\n  /**\n   * _setActive\n   */\n  private _setActive () {\n    if (this.hasAttribute('active')) return\n    // set attribute\n    this.setAttribute('active', '')\n    // Dispatch the event.\n    this.dispatchEvent(new CustomEvent('activated', { 'detail': {\n      'wasActivated': this.getAttribute('wasActivated') !== null\n    }}))\n  }\n  /**\n   * _setUnactive\n   */\n  private _setUnactive () {\n    // set 'wasActivated' attribute, if element was active\n    if (this.hasAttribute('active') && !this.hasAttribute('wasActivated')) {\n      this.setAttribute('wasActivated', '')\n    }\n    // remove 'active' attribute\n    this.removeAttribute('active')\n    // Dispatch the event.\n    this.dispatchEvent(new CustomEvent('deactivated'))\n  }\n  /**\n  * @method setter src\n  * @description set the src property\n   */\n  set src (src: string) {\n    if (this._src === src) return\n    this._src = src\n\n    fetch(this._src)\n    .then(response => response.text())\n    .then(html => {\n      this.innerHTML = html\n    })\n    .catch(console.log)\n  }\n  /**\n  * @method getter name\n  * @description get the name property\n   */\n  get src () {\n    return this._src\n  }\n}\n","'use strict'\n\nimport { PageSectionContainer } from './page-section-container'\nimport { PageSection } from './page-section'\n\nwindow.customElements.define('page-sections', PageSectionContainer)\nwindow.customElements.define('page-section', PageSection)\n"],"names":["template"],"mappings":"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"}