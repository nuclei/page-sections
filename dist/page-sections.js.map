{"version":3,"file":"page-sections.js","sources":["../src/page-section-container.ts","../src/page-section.ts","../src/page-sections.ts"],"sourcesContent":["/* global HTMLElement CustomEvent */\n'use strict'\n\ndeclare const ShadyCSS // eslint-disable-line no-unused-vars\nlet template = document.createElement('template')\ntemplate.innerHTML = `<style>\n  :host{\n    display: inline-block;\n    flex: 0 1 auto;\n    box-sizing: border-box;\n    width: 100%;\n    height: auto;\n    min-height: 100vh;\n    align-self: center;\n  }\n</style>\n<slot></slot>\n`\n\nexport class PageSectionContainer extends HTMLElement { // eslint-disable-line no-unused-vars\n  constructor () {\n    // If you define a constructor, always call super() first!\n    // This is specific to CE and required by the spec.\n    super()\n    // create shadowRoot\n    let shadowRoot = this.attachShadow({mode: 'open'})\n    // check if polyfill is used\n    if (typeof ShadyCSS !== 'undefined') {\n      ShadyCSS.prepareTemplate(template, 'page-section-container') // eslint-disable-line no-undef\n      // apply css polyfill\n      ShadyCSS.styleElement(this) // eslint-disable-line no-undef\n    }\n    // add content to shadowRoot\n    shadowRoot.appendChild(document.importNode(template.content, true))\n  }\n\n  /**\n  * @method connectedCallback\n  * @description When element is added to DOM\n   */\n  connectedCallback () {\n    let element = this\n    var fn\n    // setup scroll event to check for active elements\n    window.addEventListener('scroll', function () {\n      clearTimeout(fn)\n      fn = setTimeout(function () {\n        element.setActiveState()\n      }, 10)\n    })\n    // initialize activated state\n    setTimeout(function () {\n      element.setActiveState()\n    }, 1)\n  }\n  /**\n   * @method _inView\n   * @description check if element is in view\n   */\n  get _inView () {\n    return this.getBoundingClientRect().bottom > 0 && this.getBoundingClientRect().top < window.innerHeight\n  }\n  /**\n   * @method setActiveState\n   * @description set _active property & add/remove active attr\n   */\n  public setActiveState () {\n    if (this._inView) {\n      this._setActive()\n      // Get all child elements and activate visible ones\n      // stop once an inactive item follows an active item\n      Array.prototype.slice.call(this.querySelectorAll('page-section')).map(function (item, index, array) {\n        item.parent = item\n        item.setActiveState()\n        // abort if current element is NOT in view, but previous was in view\n        // if (index > 0 && !item.hasAttribute('active') && array[index - 1].hasAttribute('active')) {\n        //   return\n        // }\n      })\n    } else {\n      this._setUnactive()\n    }\n  }\n  /**\n   * _setActive\n   */\n  private _setActive () {\n    if (this.hasAttribute('active')) return\n    // set attribute\n    this.setAttribute('active', '')\n    // Dispatch the event.\n    this.dispatchEvent(new CustomEvent('activated'))\n  }\n  /**\n   * _setUnactive\n   */\n  private _setUnactive () {\n    // set 'wasActivated' attribute, if element was active\n    if (this.hasAttribute('active') && !this.hasAttribute('activated')) {\n      this.setAttribute('activated', '')\n    }\n    // remove 'active' attribute\n    this.removeAttribute('active')\n    // Dispatch the event.\n    this.dispatchEvent(new CustomEvent('deactivated'))\n  }\n}\n","/* global HTMLElement CustomEvent */\n'use strict'\n\ndeclare const ShadyCSS // eslint-disable-line no-unused-vars\nlet template = document.createElement('template')\ntemplate.innerHTML = `<style>\n    :host{\n      position: relative;\n      display: flex;\n      flex-direction: column;\n      flex: 0 1 auto;\n      box-sizing: border-box;\n      width: 100%;\n      height: auto;\n      align-self: center;\n    }\n    :host([fullscreen]){\n      min-height: 100vh;\n    }\n    :host([centered]){\n      align-items: stretch;\n      flex-direction: row;\n      justify-content: center;\n    }\n    :host([centered]) > #content{\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      flex: 1 1 auto;\n    }\n    #content{\n      position: relative;\n      width: var(--page-section-width, auto);\n      height: var(--page-section-height, auto);\n      min-width: var(--page-section-min-width, auto);\n      min-height: var(--page-section-min-height, auto);\n      max-width: var(--page-section-max-width, auto);\n      max-height: var(--page-section-max-height, auto);\n    }\n  </style>\n  <div id=\"content\">\n    <slot></slot>\n  </div>\n`\n\nexport class PageSection extends HTMLElement { // eslint-disable-line no-unused-vars\n  private _fullscreen: boolean = false // eslint-disable-line no-undef\n  private _maxwidth: string = null // eslint-disable-line no-undef\n  private _minwidth: string = null // eslint-disable-line no-undef\n  private _width: string = null // eslint-disable-line no-undef\n  constructor () {\n    // If you define a constructor, always call super() first!\n    // This is specific to CE and required by the spec.\n    super()\n    // create shadowRoot\n    let shadowRoot = this.attachShadow({mode: 'open'})\n    // check if polyfill is used\n    if (typeof ShadyCSS !== 'undefined') {\n      ShadyCSS.prepareTemplate(template, 'page-section') // eslint-disable-line no-undef\n      // apply css polyfill\n      ShadyCSS.styleElement(this) // eslint-disable-line no-undef\n    }\n    // add content to shadowRoot\n    shadowRoot.appendChild(document.importNode(template.content, true))\n  }\n  /**\n  * @method observedAttributes\n  * @description return attributes that should be watched for updates\n   */\n  static get observedAttributes () {\n    return ['src', 'fullscreen', 'maxwidth', 'minwidth', 'width']\n  }\n  /**\n  * @method observedAttributes\n  * @description return attributes that should be watched for updates\n   */\n  attributeChangedCallback (attrName: string, oldVal, newVal) {\n    this[attrName] = newVal\n  }\n  /**\n   * @method _inView\n   * @description check if element is in view\n   */\n  get _inView () {\n    // minimum visible percent of the element to be considered active\n    var minVisible = Math.min(1, (parseFloat(this.getAttribute('requiredVisible')) || parseFloat((this as any).parent.getAttribute('requiredVisible')) || 0.6)) // eslint-disable-line no-undef\n    // px value of element that can be hidden\n    var requiredVisiblePx = minVisible * Math.min(this.getBoundingClientRect().height, window.innerHeight)\n    // calculate visible height\n    var visibleHeight = this.getBoundingClientRect().height\n    // substract part that is outside screen to top\n    visibleHeight += Math.min(0, this.getBoundingClientRect().top)\n    // substract part that is outside screen to bottom\n    visibleHeight -= Math.max(0, (this.getBoundingClientRect().bottom - window.innerHeight))\n    // return if element is visible or not\n    return visibleHeight >= requiredVisiblePx\n  }\n  /**\n   * @method setActiveState\n   * @description set active if in viewport or unactive if not\n   */\n  public setActiveState () {\n    if (this._inView) {\n      this._setActive()\n    } else {\n      this._setUnactive()\n    }\n  }\n  /**\n   * _setActive\n   */\n  private _setActive () {\n    if (this.hasAttribute('active')) return\n    // set attribute\n    this.setAttribute('active', '')\n    // Dispatch the event.\n    this.dispatchEvent(new CustomEvent('activated'))\n  }\n  /**\n   * _setUnactive\n   */\n  private _setUnactive () {\n    // set 'activated' attribute, if element was active\n    if (this.hasAttribute('active') && !this.hasAttribute('activated')) {\n      this.setAttribute('activated', '')\n    }\n    // remove 'active' attribute\n    this.removeAttribute('active')\n    // Dispatch the event.\n    this.dispatchEvent(new CustomEvent('deactivated'))\n  }\n  /**\n  * @method setter fullscreen\n  * @description set the fullscreen property\n   */\n  set fullscreen (fullscreen: boolean) {\n    if (this._fullscreen === this._isTruthy(fullscreen)) return\n    this._fullscreen = this._isTruthy(fullscreen)\n\n    if (this._fullscreen) {\n      this.setAttribute('fullscreen', '')\n    } else {\n      this.removeAttribute('fullscreen')\n    }\n  }\n  /**\n   * @method getter fullscreen\n   * @description get the fullscreen property\n   */\n  get fullscreen () {\n    return this._fullscreen\n  }\n  /**\n  * @method setter maxwidth\n  * @description set the maxwidth property\n   */\n  set maxwidth (maxwidth: string) {\n    if (this._maxwidth === maxwidth) return\n    this._maxwidth = maxwidth\n\n    let contentElement = this.shadowRoot.querySelector('#content') as HTMLElement\n\n    if (this._maxwidth !== null && this._maxwidth !== 'none') {\n      contentElement.style.maxWidth = maxwidth\n      this.setAttribute('maxWidth', maxwidth)\n    } else {\n      contentElement.style.maxWidth = 'auto'\n      this.removeAttribute('maxWidth')\n    }\n  }\n  /**\n   * @method getter maxwidth\n   * @description get the maxwidth property\n   */\n  get maxwidth () {\n    return this._maxwidth\n  }\n  /**\n  * @method setter minwidth\n  * @description set the minwidth property\n   */\n  set minwidth (minwidth: string) {\n    if (this._minwidth === minwidth) return\n    this._minwidth = minwidth\n\n    let contentElement = this.shadowRoot.querySelector('#content') as HTMLElement\n\n    if (this._minwidth !== null && this._minwidth !== 'none') {\n      contentElement.style.minWidth = minwidth\n      this.setAttribute('minWidth', minwidth)\n    } else {\n      contentElement.style.minWidth = 'auto'\n      this.removeAttribute('minWidth')\n    }\n  }\n  /**\n   * @method getter minwidth\n   * @description get the minwidth property\n   */\n  get minwidth () {\n    return this._minwidth\n  }\n  /**\n  * @method setter width\n  * @description set the width property\n   */\n  set width (width: string) {\n    if (this._width === width) return\n    this._width = width\n\n    let contentElement = this.shadowRoot.querySelector('#content') as HTMLElement\n\n    if (this._width !== null && this._width !== 'none') {\n      contentElement.style.width = width\n      this.setAttribute('width', width)\n    } else {\n      contentElement.style.width = 'auto'\n      this.removeAttribute('width')\n    }\n  }\n  /**\n   * @method getter width\n   * @description get the width property\n   */\n  get width () {\n    return this._width\n  }\n  /**\n   * @method _isTruthy\n   * @description returns true if value is truthy or empty\n   */\n  private _isTruthy (value) {\n    if (value === true || value === 'true' || value === '') {\n      return true\n    }\n    return false\n  }\n}\n","'use strict'\n\nimport { PageSectionContainer } from './page-section-container'\nimport { PageSection } from './page-section'\n\nwindow.customElements.define('page-sections', PageSectionContainer)\nwindow.customElements.define('page-section', PageSection)\n"],"names":["template"],"mappings":"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"}